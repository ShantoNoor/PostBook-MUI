import{r,u as v,a as S,j as e,S as x,T as P,D as T,B}from"./index-D_h7GY2M.js";import{T as D,b as m,B as q,S as w,a as h}from"./axios-BqhGosuW.js";import{u as C,S as u}from"./Skeleton-DbzJHkBC.js";const E=()=>{const[d,o]=r.useState(""),[l,n]=r.useState(""),[g,i]=r.useState(!1),[y,c]=r.useState(""),b=v(),{id:s}=S(),{data:a,error:p,isPending:j}=C({queryKey:["post",s],queryFn:async()=>{try{const t=await h.get(`/posts/${s}`);return n(t.data.title),o(t.data.body),t.data}catch(t){console.error("Error fetching recipes:",t)}}}),f=async()=>{c("Updating new post..."),i(!0),(await h.put(`/posts/${s}`,{title:l,body:d,userId:a.userId,id:s})).status===200&&(c("Post added successfully!"),i(!0),setTimeout(()=>{n(""),o(""),b(`/post-details/${s}`)},1e3))};return j?e.jsxs(x,{spacing:1,children:[e.jsx(u,{variant:"rounded",height:30}),e.jsx(u,{variant:"rounded",height:60}),e.jsx(u,{variant:"rounded",height:120})]}):p?"An error has occurred: "+p.message:e.jsxs(e.Fragment,{children:[e.jsx(D,{children:`${a==null?void 0:a.title} | Post Update`}),e.jsx(P,{variant:"h2",component:"h2",children:"Update Post"}),e.jsx(T,{sx:{mb:4,mt:1}}),e.jsx(B,{component:"form",onSubmit:t=>{t.preventDefault(),f()},sx:{display:"flex",flexDirection:"column",mb:3},children:e.jsxs(x,{direction:"column",spacing:4,children:[e.jsx(m,{id:"outlined-basic",label:"Write your post title",variant:"outlined",required:!0,sx:{mb:1},value:l,onChange:t=>{n(t.target.value)}}),e.jsx(m,{id:"outlined-basic",label:"Write your post body",variant:"outlined",required:!0,sx:{mb:1},value:d,multiline:!0,rows:5,onChange:t=>{o(t.target.value)}}),e.jsx(q,{type:"submit",children:"Update Post"})]})}),e.jsx(w,{open:g,autoHideDuration:5e3,onClose:()=>i(!1),message:y})]})};export{E as default};
